#							-*- shell-script -*-

AT_SETUP(mdiff clustering)
dnl      ----------------

# Tests not ready, ignore all them for now!
exit 77

AT_CHECK([echo | mdiff -G -
], 0,
[@@@ <stdin>
])

AT_CHECK([mdiff -G - <<EOF
a
a
b
EOF
], 0,
[@@@ <stdin>
.-
|     1 a
`-> :2 [2/2]
.-> :1 [1/2]
|     2 a
`-
      3 b
])

AT_CHECK([mdiff -G - <<EOF
a
a
b
a
a
b
EOF
], 0,
[@@@ <stdin>
.-
|.-
||.-
|||   1 a
||`-> :2 [2/4]
||.-> :1 [1/4]
|||   2 a
||`-> :4 [3/4]
|`-> :4 [2/2]
|     3 b
`-> :4 [2/2]
.-> :1 [1/2]
|.-> :1 [1/2]
||.-> :2 [2/4]
|||   4 a
||`-> :5 [4/4]
||.-> :4 [3/4]
|||   5 a
||`-
|`-
|     6 b
`-
])

AT_CHECK(mdiff -G - <<EOF
a
a
b
a
b
c
EOF
], 0,
[@@@ <stdin>
.-
|     1 a
`-> :2 [2/3]
.-
|.-> :1 [1/3]
||    2 a
|`-> :4 [3/3]
|     3 b
`-> :4 [2/2]
.-> :2 [1/2]
|.-> :2 [2/3]
||    4 a
|`-
|     5 b
`-
      6 c
])

AT_CHECK(mdiff -G - <<EOF
a
a
a
a
EOF
], 0,
[@@@ <stdin>
.-
|     1 a
`-> :2 [2/4]
.-> :1 [1/4]
|     2 a
`-> :3 [3/4]
.-> :2 [2/4]
|     3 a
`-> :4 [4/4]
.-> :3 [3/4]
|     4 a
`-
])

AT_CHECK([mdiff -G - <<EOF
a
a
b
a
a
b
a
a
a
EOF
], 0,
[@@@ <stdin>
.-
|.-
||.-
|||   1 a
||`-> :2 [2/7]
||.-> :1 [1/7]
|||   2 a
||`-> :4 [3/7]
|`-> :4 [2/3]
|     3 b
`-> :4 [2/2]
.-> :1 [1/2]
|.-> :1 [1/3]
||.-> :2 [2/7]
|||   4 a
||`-> :5 [4/7]
||.-> :4 [3/7]
|||   5 a
||`-> :7 [5/7]
|`-> :7 [3/3]
|     6 b
`-
.-> :4 [2/3]
|.-> :5 [4/7]
||    7 a
|`-> :8 [6/7]
|.-> :7 [5/7]
||    8 a
|`-> :9 [7/7]
`-
.-> :8 [6/7]
|     9 a
`-
])

AT_CLEANUP()
